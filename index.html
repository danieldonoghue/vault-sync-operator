<!DOCTYPE html>
<html>
<head>
    <title>Vault Sync Operator - Helm Repository</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; margin: 40px; line-height: 1.6; color: #333; }
        .container { max-width: 800px; margin: 0 auto; }
        h1 { color: #2c3e50; border-bottom: 3px solid #3498db; padding-bottom: 10px; }
        h2 { color: #34495e; margin-top: 30px; }
        .install-section { background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; }
        .install-section h3 { margin-top: 0; color: #2c3e50; }
        code { background: #f1f2f6; padding: 2px 6px; border-radius: 4px; font-family: 'Monaco', 'Consolas', monospace; }
        pre { background: #2d3748; color: #e2e8f0; padding: 20px; border-radius: 8px; overflow-x: auto; }
        pre code { background: none; padding: 0; color: inherit; }
        .highlight { background: #fff3cd; padding: 15px; border-left: 4px solid #ffc107; margin: 20px 0; border-radius: 4px; }
        a { color: #3498db; text-decoration: none; }
        a:hover { text-decoration: underline; }
        .nav { background: #34495e; color: white; padding: 15px; border-radius: 8px; margin-bottom: 30px; }
        .nav a { color: #ecf0f1; margin-right: 20px; }
        .badge { background: #27ae60; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.8em; }
    </style>
</head>
<body>
    <div class="container">
        <div class="nav">
            <strong>📦 Vault Sync Operator Helm Repository</strong> |
            <a href="https://github.com/danieldonoghue/vault-sync-operator">GitHub</a> |
            <a href="https://artifacthub.io/packages/search?repo=vault-sync-operator">Artifact Hub</a> |
            <a href="#installation">Installation</a> |
            <a href="#examples">Examples</a>
        </div>
        
        <h1>🔐 Vault Sync Operator</h1>
        <p><span class="badge">Kubernetes Operator</span> <span class="badge">HashiCorp Vault</span> <span class="badge">Secret Management</span></p>
        
        <p>A Kubernetes operator that automatically syncs secrets from Kubernetes to HashiCorp Vault using annotations on Deployments.</p>
        
        <div class="highlight">
            <strong>🚀 Quick Start:</strong> Get up and running in minutes with automatic secret synchronization to Vault!
        </div>

        <h2>✨ Key Features</h2>
        <ul>
            <li><strong>Automatic Secret Synchronization</strong>: Sync Kubernetes secrets to Vault based on deployment annotations</li>
            <li><strong>Kubernetes Authentication</strong>: Uses Vault's Kubernetes auth backend for secure authentication</li>
            <li><strong>Auto-Discovery Mode</strong>: Automatically discovers secrets referenced in deployment pod templates</li>
            <li><strong>Custom Configuration</strong>: Selective secret keys with optional prefixing</li>
            <li><strong>Multi-Cluster Support</strong>: Per-cluster deployment with organized Vault paths</li>
            <li><strong>Monitoring & Observability</strong>: Comprehensive Prometheus metrics and health checks</li>
            <li><strong>Advanced Features</strong>: Periodic reconciliation, cleanup on deletion, secret rotation detection</li>
            <li><strong>Container Optimized</strong>: Automatic Go runtime configuration for Kubernetes environments</li>
        </ul>

        <div class="install-section" id="installation">
            <h3>📥 Installation</h3>
            <p>Add the Helm repository and install the operator:</p>
            <pre><code># Add the repository
helm repo add vault-sync-operator https://danieldonoghue.github.io/vault-sync-operator/
helm repo update

# Install the operator
helm install vault-sync-operator vault-sync-operator/vault-sync-operator \
  --namespace vault-sync-operator-system \
  --create-namespace \
  --set vault.address="http://&lt;vault-ip-address&gt;:8200"</code></pre>
        </div>

        <div class="install-section">
            <h3>⚙️ Configuration Options</h3>
            <p><strong>Required Configuration:</strong></p>
            <ul>
                <li><code>vault.address</code> - Your Vault server address (e.g., "http://vault.example.com:8200")</li>
            </ul>
            
            <p><strong>Optional Configuration:</strong></p>
            <ul>
                <li><code>vault.role</code> - Vault Kubernetes auth role (default: vault-sync-operator)</li>
                <li><code>vault.authPath</code> - Vault auth path (default: kubernetes)</li>
                <li><code>controllerManager.metrics.enableAuth</code> - Enable metrics authentication (default: true)</li>
                <li><code>controllerManager.leaderElection</code> - Enable leader election (default: false)</li>
                <li><code>image.tag</code> - Override the operator version</li>
                <li><code>resources</code> - Container resource requests and limits</li>
                <li><code>clusterName</code> - Optional cluster name for multi-cluster deployments</li>
            </ul>
        </div>

        <div class="install-section">
            <h3>🚀 Alternative Installation Methods</h3>
            <p>The operator supports multiple deployment methods:</p>
            <ul>
                <li><strong>Helm Chart</strong> (recommended): Use this repository</li>
                <li><strong>Kustomize</strong>: <code>kubectl apply -k config/default/</code></li>
                <li><strong>Raw Manifests</strong>: Download from <a href="https://github.com/danieldonoghue/vault-sync-operator/releases">GitHub Releases</a></li>
            </ul>
        </div>

        <div class="install-section" id="examples">
            <h3>📝 Usage Examples</h3>
            
            <h4>🔄 Auto-Discovery Mode (Recommended)</h4>
            <p>Automatically discovers all secrets referenced in your deployment:</p>
            <pre><code>metadata:
  annotations:
    vault-sync.io/path: "secret/data/my-app"
    # All secrets referenced in pod template will be synced</code></pre>
            
            <h4>⚙️ Custom Configuration Mode</h4>
            <p>Specify exact secrets and keys to sync:</p>
            <pre><code>metadata:
  annotations:
    vault-sync.io/path: "secret/data/my-app"
    vault-sync.io/secrets: |
      [
        {
          "name": "my-app-secrets",
          "keys": ["username", "password"],
          "prefix": "app_"
        }
      ]</code></pre>
            
            <h4>🚀 Advanced Features</h4>
            <pre><code>metadata:
  annotations:
    vault-sync.io/path: "secret/data/my-app"
    vault-sync.io/preserve-on-delete: "true"  # Don't delete from Vault
    vault-sync.io/reconcile: "5m"            # Check every 5 minutes
    vault-sync.io/rotation-check: "enabled"  # Detect secret changes</code></pre>
        </div>

        <div class="install-section">
            <h3>📊 Monitoring & Observability</h3>
            <p>The operator provides comprehensive monitoring capabilities:</p>
            <ul>
                <li><strong>Prometheus Metrics</strong>: Sync operations, errors, authentication attempts</li>
                <li><strong>Health Checks</strong>: <code>/healthz</code> and <code>/readyz</code> endpoints</li>
                <li><strong>Structured Logging</strong>: Detailed error messages with context</li>
                <li><strong>Metrics Authentication</strong>: Secure metrics endpoint access</li>
            </ul>
            
            <p><strong>Access metrics (with authentication):</strong></p>
            <pre><code># Get service account token
TOKEN=$(kubectl create token vault-sync-operator-controller-manager -n vault-sync-operator-system)

# Access metrics
kubectl port-forward -n vault-sync-operator-system svc/vault-sync-operator-controller-manager-metrics-service 8080:8080
curl -H "Authorization: Bearer $TOKEN" http://localhost:8080/metrics</code></pre>
        </div>

        <div class="install-section">
            <h3>🔧 Troubleshooting</h3>
            <p>Common debugging commands:</p>
            <pre><code># Check operator logs
kubectl logs -n vault-sync-operator-system deployment/vault-sync-operator-controller-manager

# Verify deployment annotations
kubectl get deployment &lt;name&gt; -o yaml | grep -A 10 annotations

# Check health endpoints
kubectl port-forward -n vault-sync-operator-system deployment/vault-sync-operator-controller-manager 8081:8081
curl http://localhost:8081/healthz
curl http://localhost:8081/readyz</code></pre>
        </div>

        <h2>📚 Documentation</h2>
        <ul>
            <li><a href="https://github.com/danieldonoghue/vault-sync-operator#readme">📖 Complete README</a> - Comprehensive guide with all features</li>
            <li><a href="docs/">📁 Documentation Directory</a> - Detailed setup and configuration guides</li>
            <li><a href="examples/">💡 Example Configurations</a> - Ready-to-use YAML examples</li>
            <li><a href="https://github.com/danieldonoghue/vault-sync-operator">🔗 Source Code</a> - GitHub repository</li>
        </ul>
        
        <div class="install-section">
            <h3>📋 Quick Reference</h3>
            <p><strong>Essential Links:</strong></p>
            <ul>
                <li><a href="https://github.com/danieldonoghue/vault-sync-operator/blob/master/docs/VAULT-SETUP-GUIDE.md">🏗️ Vault Setup Guide</a></li>
                <li><a href="https://github.com/danieldonoghue/vault-sync-operator/blob/master/docs/DEPLOYMENT.md">🚀 Deployment Guide</a></li>
                <li><a href="https://github.com/danieldonoghue/vault-sync-operator/blob/master/docs/multi-cluster-deployment.md">🌐 Multi-Cluster Setup</a></li>
                <li><a href="https://github.com/danieldonoghue/vault-sync-operator/blob/master/examples/basic-example.yaml">📄 Basic Example</a></li>
                <li><a href="https://github.com/danieldonoghue/vault-sync-operator/blob/master/examples/auto-discovery-example.yaml">🔍 Auto-Discovery Example</a></li>
            </ul>
        </div>

        <h2>📊 Available Charts</h2>
        <p>Check the <a href="index.yaml">index.yaml</a> for all available chart versions.</p>

        <h2>🆘 Support</h2>
        <p>
            <strong>Issues:</strong> <a href="https://github.com/danieldonoghue/vault-sync-operator/issues">GitHub Issues</a><br>
            <strong>Discussions:</strong> <a href="https://github.com/danieldonoghue/vault-sync-operator/discussions">GitHub Discussions</a><br>
            <strong>Documentation:</strong> <a href="README.md">Complete README with troubleshooting guide</a>
        </p>

        <hr style="margin-top: 40px; border: none; border-top: 1px solid #bdc3c7;">
        <p style="text-align: center; color: #7f8c8d; font-size: 0.9em;">
            Generated automatically from <a href="https://github.com/danieldonoghue/vault-sync-operator">danieldonoghue/vault-sync-operator</a>
        </p>
    </div>
</body>
</html>
